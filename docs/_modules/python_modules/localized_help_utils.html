

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>python_modules.localized_help_utils &mdash; Cinnamon Tools  documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/cinnamon-logo.svg"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Cinnamon Tools
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../includes/00-requirements.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../includes/01-usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../includes/02-development-notes.html">Development notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../includes/03-code-styling.html">Code styling/guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../includes/04-EOL.html"><abbr title="end-of-life">EOL</abbr> ideas/plans</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Cinnamon Tools</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
      <li>python_modules.localized_help_utils</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for python_modules.localized_help_utils</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/python3</span>
<span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;Utils for the localized_help_creator module.</span>

<span class="sd">Attributes</span>
<span class="sd">----------</span>
<span class="sd">Ansi : object</span>
<span class="sd">    :any:`app_utils.ANSIColors` class initialization.</span>
<span class="sd">BOXED_CONTAINER : str</span>
<span class="sd">    Boxed container template.</span>
<span class="sd">HTML_DOC : str</span>
<span class="sd">    HTML document template.</span>
<span class="sd">LOCALE_SECTION : str</span>
<span class="sd">    Localized section template.</span>
<span class="sd">OPTION : str</span>
<span class="sd">    Option tag template.</span>
<span class="sd">README_DOC : str</span>
<span class="sd">    README file template.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">gettext</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="kn">from</span> <span class="nn">datetime</span> <span class="k">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">shutil</span> <span class="k">import</span> <span class="n">copy2</span>

<span class="kn">from</span> <span class="nn">.</span> <span class="k">import</span> <span class="n">app_utils</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="k">import</span> <span class="n">polib</span>


<span class="n">Ansi</span> <span class="o">=</span> <span class="n">app_utils</span><span class="o">.</span><span class="n">Ansi</span>

<span class="n">HTML_DOC</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;&lt;!DOCTYPE html&gt;</span>
<span class="s2">&lt;html&gt;</span>

<span class="s2">&lt;head&gt;</span>
<span class="s2">&lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html;charset=utf-8&quot;&gt;</span>
<span class="s2">&lt;title&gt;</span><span class="si">{title}</span><span class="s2">&lt;/title&gt;</span>
<span class="s2">&lt;link rel=&quot;shortcut icon&quot; type=&quot;image/x-icon&quot; href=&quot;./icon.png&quot;&gt;</span>
<span class="s2">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;</span>
<span class="s2">&lt;script type=&quot;text/javascript&quot;&gt;</span>
<span class="si">{js_localizations_handler}</span><span class="s2"></span>
<span class="s2">&lt;/script&gt;</span>
<span class="s2">&lt;style type=&quot;text/css&quot;&gt;</span>
<span class="si">{css_bootstrap_theme}</span><span class="s2"></span>
<span class="si">{css_bootstrap_tweaks}</span><span class="s2"></span>
<span class="si">{css_custom}</span><span class="s2"></span>
<span class="s2">&lt;/style&gt;</span>
<span class="s2">&lt;/head&gt;</span>

<span class="s2">&lt;body&gt;</span>
<span class="s2">&lt;noscript&gt;</span>
<span class="s2">&lt;div class=&quot;alert alert-warning&quot; role=&quot;alert&quot;&gt;</span>
<span class="s2">&lt;p&gt;&lt;strong&gt;Oh snap! This page needs JavaScript enabled to display correctly.&lt;/strong&gt;&lt;/p&gt;</span>
<span class="s2">&lt;p&gt;&lt;strong&gt;This page uses JavaScript only to switch between the available languages, display images, smooth scrolling, etc.&lt;/strong&gt;&lt;/p&gt;</span>
<span class="s2">&lt;p&gt;&lt;strong&gt;There are no tracking services of any kind and never will be (at least, not from my side).&lt;/strong&gt;&lt;/p&gt;</span>
<span class="s2">&lt;/div&gt;</span>
<span class="s2">&lt;!-- .alert.alert-warning --&gt;</span>
<span class="s2">&lt;/noscript&gt;</span>
<span class="s2">&lt;div id=&quot;mainarea&quot;&gt;</span>
<span class="s2">    &lt;nav class=&quot;text-bold py-0 py-md-0 navbar navbar-expand-sm navbar-light fixed-top bg-light&quot; role=&quot;navigation&quot;&gt;</span>
<span class="s2">        &lt;div class=&quot;container-fluid&quot;&gt;</span>
<span class="s2">            &lt;div class=&quot;navbar-header&quot;&gt;</span>
<span class="s2">                &lt;ul class=&quot;nav navbar-nav&quot;&gt;</span>
<span class="s2">                    &lt;!-- The preventDefault() calls are to avoid changing the address in the address bar. --&gt;</span>
<span class="s2">                    &lt;li&gt;&lt;a id=&quot;nav-xlet-help&quot; class=&quot;navbar-brand&quot; onclick=&quot;event.preventDefault();&quot; href=&quot;#xlet-help&quot;&gt;Help&lt;/a&gt;&lt;/li&gt;</span>
<span class="s2">                    &lt;li&gt;&lt;a id=&quot;nav-xlet-contributors&quot; class=&quot;navbar-brand&quot; onclick=&quot;event.preventDefault();&quot; href=&quot;#xlet-contributors&quot;&gt;Contributors&lt;/a&gt;&lt;/li&gt;</span>
<span class="s2">                    &lt;li&gt;&lt;a id=&quot;nav-xlet-changelog&quot; class=&quot;navbar-brand&quot; onclick=&quot;event.preventDefault();&quot; href=&quot;#xlet-changelog&quot;&gt;Changelog&lt;/a&gt;&lt;/li&gt;</span>
<span class="s2">                &lt;/ul&gt;</span>
<span class="s2">            &lt;/div&gt;</span>
<span class="s2">            &lt;form class=&quot;form-inline&quot;&gt;</span>
<span class="s2">                &lt;div class=&quot;input-group input-group-sm&quot;&gt;</span>
<span class="s2">                    &lt;div class=&quot;input-group-prepend&quot;&gt;</span>
<span class="s2">                        &lt;span class=&quot;input-group-text text-bold text-font-size-xx-large&quot; for=&quot;localization-switch&quot;&gt;âŠ›&lt;/span&gt;</span>
<span class="s2">                    &lt;/div&gt;</span>
<span class="s2">                    &lt;select class=&quot;custom-select custom-select-sm text-bold&quot; id=&quot;localization-switch&quot; onchange=&quot;self.toggleLocalizationVisibility(value, this);&quot;&gt;</span>
<span class="si">{options}</span><span class="s2"></span>
<span class="s2">                    &lt;/select&gt;</span>
<span class="s2">                &lt;/div&gt;</span>
<span class="s2">            &lt;/form&gt;</span>
<span class="s2">        &lt;/div&gt;</span>
<span class="s2">    &lt;/nav&gt;</span>
<span class="s2">&lt;span id=&quot;xlet-help&quot;&gt;</span>
<span class="s2">&lt;div class=&quot;container boxed my-3 py-3&quot;&gt;</span>
<span class="si">{sections}</span><span class="s2"></span>
<span class="s2">&lt;/div&gt; &lt;!-- .container.boxed --&gt;</span>
<span class="s2">&lt;span id=&quot;xlet-contributors&quot;&gt;</span>
<span class="si">{contributors}</span><span class="s2"></span>
<span class="s2">&lt;span id=&quot;xlet-changelog&quot;&gt;</span>
<span class="si">{changelog}</span><span class="s2"></span>
<span class="s2">&lt;/div&gt; &lt;!-- #mainarea --&gt;</span>
<span class="s2">&lt;!--Footer--&gt;</span>
<span class="s2">&lt;footer class=&quot;page-footer text-bold bg-light pt-4 mt-4&quot;&gt;</span>
<span class="s2">    &lt;!--Footer Links--&gt;</span>
<span class="s2">    &lt;div class=&quot;container-fluid text-left&quot;&gt;</span>
<span class="s2">        &lt;ul class=&quot;list-unstyled&quot;&gt;</span>
<span class="s2">            &lt;li&gt;</span>
<span class="s2">                &lt;p&gt;Page created with &lt;a href=&quot;https://getbootstrap.com&quot;&gt;&lt;b&gt;Bootstrap&lt;/b&gt;&lt;/a&gt; v4.1.3.&lt;/p&gt;</span>
<span class="s2">            &lt;/li&gt;</span>
<span class="s2">            &lt;li&gt;</span>
<span class="s2">                &lt;p&gt;&lt;a href=&quot;https://bootswatch.com/flatly&quot;&gt;&lt;b&gt;Flatly&lt;/b&gt;&lt;/a&gt; Bootstrap theme by &lt;a href=&quot;https://bootswatch.com&quot;&gt;&lt;b&gt;Bootswatch&lt;/b&gt;&lt;/a&gt;&lt;/p&gt;</span>
<span class="s2">            &lt;/li&gt;</span>
<span class="s2">            &lt;li&gt;</span>
<span class="s2">                &lt;p&gt;&lt;a href=&quot;https://github.com/julienetie/smooth-scroll&quot;&gt;&lt;b&gt;Smooth Scroll plugin&lt;/b&gt;&lt;/a&gt; provided by &lt;a href=&quot;https://github.com/julienetie&quot;&gt;&lt;b&gt;Julien Etienne&lt;/b&gt;&lt;/a&gt;&lt;/p&gt;</span>
<span class="s2">            &lt;/li&gt;</span>
<span class="s2">        &lt;/ul&gt;</span>
<span class="s2">    &lt;/div&gt;</span>
<span class="s2">    &lt;!--/.Footer Links--&gt;</span>
<span class="s2">    &lt;!--Copyright--&gt;</span>
<span class="s2">    &lt;div class=&quot;text-center py-3&quot;&gt;</span>
<span class="s2">        &lt;div class=&quot;container-fluid&quot;&gt;</span>
<span class="s2">            Â© 2016-</span><span class="si">%s</span><span class="s2"> &lt;a href=&quot;</span><span class="si">%s</span><span class="s2">&quot;&gt;Odyseus&lt;/a&gt;</span>
<span class="s2">        &lt;/div&gt;</span>
<span class="s2">    &lt;/div&gt;</span>
<span class="s2">    &lt;!--/.Copyright--&gt;</span>
<span class="s2">&lt;/footer&gt;</span>
<span class="s2">&lt;!--/.Footer--&gt;</span>
<span class="s2">&lt;script type=&quot;text/javascript&quot;&gt;toggleLocalizationVisibility(null);</span>
<span class="si">{js_custom}</span><span class="s2"></span>
<span class="s2">&lt;/script&gt;</span>
<span class="s2">&lt;/body&gt;</span>
<span class="s2">&lt;/html&gt;</span>
<span class="s2">&quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">()</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">app_utils</span><span class="o">.</span><span class="n">repo_url</span><span class="p">)</span>

<span class="n">BOXED_CONTAINER</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;&lt;div class=&quot;container boxed my-3 py-3&quot;&gt;</span>
<span class="si">{0}</span><span class="s2"></span>
<span class="s2">&lt;/div&gt; &lt;!-- .container.boxed --&gt;</span>
<span class="s2">&quot;&quot;&quot;</span>


<span class="n">LOCALE_SECTION</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">&lt;div id=&quot;</span><span class="si">{language_code}</span><span class="s2">&quot; class=&quot;localization-content&quot; </span><span class="si">{hidden}</span><span class="s2">&gt;</span>
<span class="si">{title}</span><span class="s2"></span>
<span class="si">{warning}</span><span class="s2"></span>
<span class="si">{compatibility}</span><span class="s2"></span>
<span class="si">{localization}</span><span class="s2"></span>
<span class="si">{content_base}</span><span class="s2"></span>
<span class="si">{content_extra}</span><span class="s2"></span>
<span class="s2">&lt;/br&gt;</span>
<span class="si">{only_english_alert}</span><span class="s2"></span>
<span class="s2">&lt;/div&gt; &lt;!-- .localization-content --&gt;</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="c1"># {endonym} inside an HTML comment at the very begening of the string so I can sort all</span>
<span class="c1"># the &quot;option&quot; elements by endonym.</span>
<span class="n">OPTION</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;&lt;!-- </span><span class="si">{endonym}</span><span class="s2"> --&gt;&lt;option </span><span class="si">{selected}</span><span class="s2">data-title=&quot;</span><span class="si">{title}</span><span class="s2">&quot; data-xlet-help=&quot;</span><span class="si">{xlet_help}</span><span class="s2">&quot; data-xlet-contributors=&quot;</span><span class="si">{xlet_contributors}</span><span class="s2">&quot; data-xlet-changelog=&quot;</span><span class="si">{xlet_changelog}</span><span class="s2">&quot; value=&quot;</span><span class="si">{language_code}</span><span class="s2">&quot;&gt;</span><span class="si">{endonym}</span><span class="s2"> (</span><span class="si">{language_name}</span><span class="s2">)</span><span class="si">{translated_percentage}</span><span class="s2">&lt;/option&gt;&quot;&quot;&quot;</span>


<span class="n">README_DOC</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span><span class="si">{readme_compatibility}</span><span class="s2"></span>
<span class="si">{readme_content}</span><span class="s2"></span>
<span class="s2">&quot;&quot;&quot;</span>


<div class="viewcode-block" id="XletMetadata"><a class="viewcode-back" href="../../modules/python_modules/python_modules.localized_help_utils.html#python_modules.localized_help_creator.XletMetadata">[docs]</a><span class="k">class</span> <span class="nc">XletMetadata</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Xlet metadata.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    xlet_meta : dict</span>
<span class="sd">        The parsed content of the metadata.json file from an xlet.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xlet_dir</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;initialization.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        xlet_dir : str</span>
<span class="sd">            Path to an xlet directory.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">xlet_dir</span><span class="p">,</span> <span class="s2">&quot;metadata.json&quot;</span><span class="p">),</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>
            <span class="n">raw_meta</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xlet_meta</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">raw_meta</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Failed to get metadata - missing, corrupt, or incomplete metadata.json file&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xlet_meta</span> <span class="o">=</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="Translations"><a class="viewcode-back" href="../../modules/python_modules/python_modules.localized_help_utils.html#python_modules.localized_help_creator.Translations">[docs]</a><span class="k">class</span> <span class="nc">Translations</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Translations mechanism.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialization.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_translations</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_null</span> <span class="o">=</span> <span class="n">gettext</span><span class="o">.</span><span class="n">NullTranslations</span><span class="p">()</span>

<div class="viewcode-block" id="Translations.store"><a class="viewcode-back" href="../../modules/python_modules/python_modules.localized_help_utils.html#python_modules.localized_help_creator.Translations.store">[docs]</a>    <span class="k">def</span> <span class="nf">store</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">localedir</span><span class="p">,</span> <span class="n">languages</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Store all translations.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        domain : str</span>
<span class="sd">            The domain to get translations from.</span>
<span class="sd">        localedir : str</span>
<span class="sd">            The directory were the translations are stored.</span>
<span class="sd">        languages : list</span>
<span class="sd">            The list of languages to retrieve.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">lang</span> <span class="ow">in</span> <span class="n">languages</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">translations</span> <span class="o">=</span> <span class="n">gettext</span><span class="o">.</span><span class="n">translation</span><span class="p">(</span><span class="n">domain</span><span class="p">,</span>
                                                   <span class="n">localedir</span><span class="p">,</span>
                                                   <span class="p">[</span><span class="n">lang</span><span class="p">])</span>
            <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No translations found for language code &#39;</span><span class="si">{}</span><span class="s2">&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lang</span><span class="p">))</span>
                <span class="n">translations</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="k">if</span> <span class="n">translations</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_translations</span><span class="p">[</span><span class="n">lang</span><span class="p">]</span> <span class="o">=</span> <span class="n">translations</span></div>

<div class="viewcode-block" id="Translations.get"><a class="viewcode-back" href="../../modules/python_modules/python_modules.localized_help_utils.html#python_modules.localized_help_creator.Translations.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">languages</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get translations.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        languages : list</span>
<span class="sd">            The languages to get the translation for.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        dict</span>
<span class="sd">            The translations object for the requested languages.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">lang</span> <span class="ow">in</span> <span class="n">languages</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">lang</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_translations</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_translations</span><span class="p">[</span><span class="n">lang</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_null</span></div></div>


<div class="viewcode-block" id="HTMLInlineAssets"><a class="viewcode-back" href="../../modules/python_modules/python_modules.localized_help_utils.html#python_modules.localized_help_creator.HTMLInlineAssets">[docs]</a><span class="k">class</span> <span class="nc">HTMLInlineAssets</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;HTML inline assets.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    css_bootstrap_theme : str</span>
<span class="sd">        The content of the CSS Bootstrap theme.</span>
<span class="sd">    css_bootstrap_tweaks : str</span>
<span class="sd">        The content of the CSS with tweaks for the Bootstrap theme.</span>
<span class="sd">    js_localizations_handler : str</span>
<span class="sd">        Localizations handler JavaScript code.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">repo_folder</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialization.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        repo_folder : str</span>
<span class="sd">            Path to the repository folder.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">HTMLInlineAssets</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">css_bootstrap_theme</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">css_bootstrap_tweaks</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">js_localizations_handler</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="n">assets_folder_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">repo_folder</span><span class="p">,</span> <span class="s2">&quot;__app__&quot;</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="s2">&quot;html_assets&quot;</span><span class="p">)</span>
        <span class="n">path_css_bootstrap_theme</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">assets_folder_path</span><span class="p">,</span> <span class="s2">&quot;css&quot;</span><span class="p">,</span> <span class="s2">&quot;flatly_bootstrap_theme&quot;</span><span class="p">,</span>
                                                <span class="s2">&quot;dist&quot;</span><span class="p">,</span> <span class="s2">&quot;flatly_bootstrap_theme.min.css&quot;</span><span class="p">)</span>
        <span class="n">path_css_bootstrap_tweaks</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">assets_folder_path</span><span class="p">,</span> <span class="s2">&quot;css&quot;</span><span class="p">,</span> <span class="s2">&quot;bootstrap-tweaks.css&quot;</span><span class="p">)</span>
        <span class="n">path_js_localizations_handler</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">assets_folder_path</span><span class="p">,</span> <span class="s2">&quot;js&quot;</span><span class="p">,</span> <span class="s2">&quot;localizations-handler.min.js&quot;</span><span class="p">)</span>

        <span class="c1"># Do the &quot;heavy lifting&quot; first.</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path_css_bootstrap_theme</span><span class="p">):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path_css_bootstrap_theme</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">bootstrap_css</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">css_bootstrap_theme</span> <span class="o">=</span> <span class="n">bootstrap_css</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path_css_bootstrap_tweaks</span><span class="p">):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path_css_bootstrap_tweaks</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">bootstrap_css_tweaks</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">css_bootstrap_tweaks</span> <span class="o">=</span> <span class="n">bootstrap_css_tweaks</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path_js_localizations_handler</span><span class="p">):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path_js_localizations_handler</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">localizations_handler_js</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">js_localizations_handler</span> <span class="o">=</span> <span class="n">localizations_handler_js</span><span class="o">.</span><span class="n">read</span><span class="p">()</span></div>


<div class="viewcode-block" id="get_time_zone"><a class="viewcode-back" href="../../modules/python_modules/python_modules.localized_help_utils.html#python_modules.localized_help_creator.get_time_zone">[docs]</a><span class="k">def</span> <span class="nf">get_time_zone</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Get time zone.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        String representation of a time zone.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">time</span><span class="o">.</span><span class="n">localtime</span><span class="p">()</span><span class="o">.</span><span class="n">tm_isdst</span> <span class="ow">and</span> <span class="n">time</span><span class="o">.</span><span class="n">daylight</span><span class="p">:</span>
        <span class="n">tzone</span> <span class="o">=</span> <span class="o">-</span><span class="n">time</span><span class="o">.</span><span class="n">altzone</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">tzone</span> <span class="o">=</span> <span class="o">-</span><span class="n">time</span><span class="o">.</span><span class="n">timezone</span>

    <span class="c1"># Up to here, tzone is an integer.</span>
    <span class="n">tzone</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tzone</span> <span class="o">/</span> <span class="mi">60</span> <span class="o">/</span> <span class="mi">60</span><span class="p">)</span>

    <span class="c1"># And the ugliness begins!!!</span>
    <span class="p">[</span><span class="n">h</span><span class="p">,</span> <span class="n">m</span><span class="p">]</span> <span class="o">=</span> <span class="n">tzone</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>

    <span class="n">isNegative</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">h</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span>
    <span class="n">hours</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{0:03d}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">h</span><span class="p">))</span> <span class="k">if</span> <span class="n">isNegative</span> <span class="k">else</span> <span class="s2">&quot;</span><span class="si">{0:02d}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">h</span><span class="p">))</span>
    <span class="n">minutes</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{0:02d}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">m</span><span class="p">))</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">hours</span> <span class="k">if</span> <span class="n">isNegative</span> <span class="k">else</span> <span class="s2">&quot;+&quot;</span> <span class="o">+</span> <span class="n">hours</span><span class="p">)</span> <span class="o">+</span> <span class="n">minutes</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;+0000&quot;</span></div>


<div class="viewcode-block" id="get_timestamp"><a class="viewcode-back" href="../../modules/python_modules/python_modules.localized_help_utils.html#python_modules.localized_help_creator.get_timestamp">[docs]</a><span class="k">def</span> <span class="nf">get_timestamp</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Get time stamp.</span>

<span class="sd">    Returns a time stamp in the same format used by xgettex.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        A time stamp in the same format used in .pot files.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="c1"># Since the &quot;padding&quot; with zeroes of the rest of the values converts</span>
    <span class="c1"># them into strings, lets convert to string the year too.</span>
    <span class="n">YEAR</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">year</span><span class="p">)</span>
    <span class="c1"># &quot;Pad&quot; all the following values with zeroes.</span>
    <span class="n">MO</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{0:02d}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">month</span><span class="p">)</span>
    <span class="n">DA</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{0:02d}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">day</span><span class="p">)</span>
    <span class="n">HO</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{0:02d}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">hour</span><span class="p">)</span>
    <span class="n">MI</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{0:02d}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">minute</span><span class="p">)</span>
    <span class="n">ZONE</span> <span class="o">=</span> <span class="n">get_time_zone</span><span class="p">()</span>

    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">-</span><span class="si">%s</span><span class="s2">-</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">:</span><span class="si">%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">MO</span><span class="p">,</span> <span class="n">DA</span><span class="p">,</span> <span class="n">HO</span><span class="p">,</span> <span class="n">MI</span><span class="p">,</span> <span class="n">ZONE</span><span class="p">)</span></div>


<div class="viewcode-block" id="validate_po_file"><a class="viewcode-back" href="../../modules/python_modules/python_modules.localized_help_utils.html#python_modules.localized_help_creator.validate_po_file">[docs]</a><span class="k">def</span> <span class="nf">validate_po_file</span><span class="p">(</span><span class="n">pofile_path</span><span class="p">,</span> <span class="n">lang_name</span><span class="p">,</span> <span class="n">xlet_meta</span><span class="p">,</span> <span class="n">xlet_slug</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Validate .po file.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    pofile_path : str</span>
<span class="sd">        Path to a .po file.</span>
<span class="sd">    lang_name : str</span>
<span class="sd">        A language name.</span>
<span class="sd">    xlet_meta : dict</span>
<span class="sd">        An xlet metadata.</span>
<span class="sd">    xlet_slug : str</span>
<span class="sd">        An xlet folder name.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">po_file</span> <span class="o">=</span> <span class="n">polib</span><span class="o">.</span><span class="n">pofile</span><span class="p">(</span><span class="n">pofile_path</span><span class="p">,</span> <span class="n">wrapwidth</span><span class="o">=</span><span class="mi">99999999</span><span class="p">)</span>
    <span class="n">do_save</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="c1"># Add package information to the .po files headers.</span>
    <span class="k">if</span> <span class="n">xlet_meta</span><span class="p">:</span>
        <span class="n">do_save</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">po_file</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span>
            <span class="s2">&quot;Project-Id-Version&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">xlet_slug</span><span class="p">,</span> <span class="n">xlet_meta</span><span class="p">[</span><span class="s2">&quot;version&quot;</span><span class="p">])</span>

    <span class="c1"># Sanitize language code to be UNIX compliant</span>
    <span class="k">if</span> <span class="s2">&quot;-&quot;</span> <span class="ow">in</span> <span class="n">po_file</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;Language&quot;</span><span class="p">]:</span>
        <span class="n">do_save</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">po_file</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;Language&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">po_file</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;Language&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>

    <span class="c1"># Add the Report-Msgid-Bugs- field to the header.</span>
    <span class="k">if</span> <span class="s2">&quot;Report-Msgid-Bugs-To&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">po_file</span><span class="o">.</span><span class="n">metadata</span> <span class="ow">or</span> <span class="n">po_file</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;Report-Msgid-Bugs-To&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">app_utils</span><span class="o">.</span><span class="n">repo_url</span><span class="p">:</span>
        <span class="n">do_save</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">po_file</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;Report-Msgid-Bugs-To&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">app_utils</span><span class="o">.</span><span class="n">repo_url</span>

    <span class="c1"># Add the Language-Team field to the header to STFU all msgfmt warnings.</span>
    <span class="k">if</span> <span class="s2">&quot;Language-Team&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">po_file</span><span class="o">.</span><span class="n">metadata</span> <span class="ow">or</span> <span class="n">po_file</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;Language-Team&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
        <span class="n">do_save</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">po_file</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;Language-Team&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lang_name</span>

    <span class="c1"># Add the PO-Revision-Date field to the header to STFU all msgfmt warnings.</span>
    <span class="k">if</span> <span class="s2">&quot;PO-Revision-Date&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">po_file</span><span class="o">.</span><span class="n">metadata</span><span class="p">:</span>
        <span class="n">do_save</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">po_file</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;PO-Revision-Date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_timestamp</span><span class="p">()</span>

    <span class="c1"># Add the Last-Translator field to the header to STFU all msgfmt warnings.</span>
    <span class="k">if</span> <span class="s2">&quot;Last-Translator&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">po_file</span><span class="o">.</span><span class="n">metadata</span><span class="p">:</span>
        <span class="n">do_save</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">po_file</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;Last-Translator&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="k">if</span> <span class="n">po_file</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;X-Generator&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;POEditor.com&quot;</span><span class="p">:</span>
        <span class="n">do_save</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">po_file</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;X-Generator&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="c1"># Save only if the PO file metadata/header has been changed.</span>
    <span class="k">if</span> <span class="n">do_save</span><span class="p">:</span>
        <span class="n">po_file</span><span class="o">.</span><span class="n">save</span><span class="p">()</span></div>


<div class="viewcode-block" id="save_file"><a class="viewcode-back" href="../../modules/python_modules/python_modules.localized_help_utils.html#python_modules.localized_help_creator.save_file">[docs]</a><span class="k">def</span> <span class="nf">save_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">is_xlet_help_file</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Save file.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    file_path : str</span>
<span class="sd">        Path to a file to save data to.</span>
<span class="sd">    data : str</span>
<span class="sd">        The data to save into a file.</span>
<span class="sd">    is_xlet_help_file : bool, optional</span>
<span class="sd">        If the saved file is the xlet&#39;s HELP.html file, copy it into the docs folder</span>
<span class="sd">        for on-line hosting.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">app_utils</span><span class="o">.</span><span class="n">Ansi</span><span class="o">.</span><span class="n">ERROR</span><span class="p">(</span><span class="n">err</span><span class="p">))</span>
        <span class="n">quit</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">is_xlet_help_file</span><span class="p">:</span>
            <span class="n">xlet_folder</span> <span class="o">=</span> <span class="n">app_utils</span><span class="o">.</span><span class="n">get_parent_dir</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">xlet_icon</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">xlet_folder</span><span class="p">,</span> <span class="s2">&quot;icon.png&quot;</span><span class="p">)</span>
            <span class="n">xlet_slug</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">app_utils</span><span class="o">.</span><span class="n">get_parent_dir</span><span class="p">(</span><span class="n">file_path</span><span class="p">))</span>
            <span class="n">dest_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">app_utils</span><span class="o">.</span><span class="n">docs_sources_path</span><span class="p">,</span> <span class="s2">&quot;_static&quot;</span><span class="p">,</span>
                                     <span class="s2">&quot;xlets_help_pages&quot;</span><span class="p">,</span> <span class="n">xlet_slug</span><span class="p">)</span>
            <span class="n">dest_html_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dest_path</span><span class="p">,</span> <span class="s2">&quot;index.html&quot;</span><span class="p">)</span>
            <span class="n">dest_icon_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dest_path</span><span class="p">,</span> <span class="s2">&quot;icon.png&quot;</span><span class="p">)</span>

            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">dest_path</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">dest_html_file</span><span class="p">):</span>
                <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">dest_html_file</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">dest_icon_file</span><span class="p">):</span>
                <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">dest_icon_file</span><span class="p">)</span>

            <span class="n">copy2</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">dest_html_file</span><span class="p">)</span>
            <span class="n">copy2</span><span class="p">(</span><span class="n">xlet_icon</span><span class="p">,</span> <span class="n">dest_icon_file</span><span class="p">)</span></div>


<div class="viewcode-block" id="get_compatibility"><a class="viewcode-back" href="../../modules/python_modules/python_modules.localized_help_utils.html#python_modules.localized_help_creator.get_compatibility">[docs]</a><span class="k">def</span> <span class="nf">get_compatibility</span><span class="p">(</span><span class="n">xlet_meta</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">for_readme</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get compatibility.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    xlet_meta : None, optional</span>
<span class="sd">        Xlet metadata.</span>
<span class="sd">    for_readme : bool, optional</span>
<span class="sd">        Option used to decide if certain information should be added to the</span>
<span class="sd">        generated README.md file.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        A *compatibility block* that can be in HTML or Markdown.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="k">if</span> <span class="n">for_readme</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">+=</span> <span class="s2">&quot;## Compatibility</span><span class="se">\n\n</span><span class="s2">&quot;</span>

    <span class="k">for</span> <span class="n">version</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">xlet_meta</span><span class="p">[</span><span class="s2">&quot;cinnamon-version&quot;</span><span class="p">]):</span>
        <span class="k">if</span> <span class="n">for_readme</span><span class="p">:</span>
            <span class="c1"># The README files uses SVG images hosted on-line for the compatibility badges.</span>
            <span class="n">data</span> <span class="o">+=</span> <span class="s2">&quot;![Cinnamon </span><span class="si">{0}</span><span class="s2">](</span><span class="si">{1}</span><span class="s2">/lib/badges/cinn-</span><span class="si">{0}</span><span class="s2">.svg)</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">version</span><span class="p">,</span>
                                                                            <span class="n">app_utils</span><span class="o">.</span><span class="n">repo_pages_url</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># The help files uses a Bootstrap badge for the compatibility badges.</span>
            <span class="k">if</span> <span class="n">version</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="s2">&quot;5&quot;</span><span class="p">,</span> <span class="s2">&quot;8&quot;</span><span class="p">]:</span>
                <span class="n">data</span> <span class="o">+=</span> <span class="n">get_bootstrap_badge</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="s2">&quot;warning&quot;</span><span class="p">,</span>
                                            <span class="n">extra_classes</span><span class="o">=</span><span class="s2">&quot;text-monospace&quot;</span><span class="p">,</span>
                                            <span class="n">content</span><span class="o">=</span><span class="s2">&quot;v&quot;</span> <span class="o">+</span> <span class="n">version</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">version</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="s2">&quot;6&quot;</span><span class="p">,</span> <span class="s2">&quot;9&quot;</span><span class="p">]:</span>
                <span class="n">data</span> <span class="o">+=</span> <span class="n">get_bootstrap_badge</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="s2">&quot;success&quot;</span><span class="p">,</span>
                                            <span class="n">extra_classes</span><span class="o">=</span><span class="s2">&quot;text-monospace&quot;</span><span class="p">,</span>
                                            <span class="n">content</span><span class="o">=</span><span class="s2">&quot;v&quot;</span> <span class="o">+</span> <span class="n">version</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">version</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;4&quot;</span><span class="p">,</span> <span class="s2">&quot;7&quot;</span><span class="p">]:</span>
                <span class="n">data</span> <span class="o">+=</span> <span class="n">get_bootstrap_badge</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="s2">&quot;info&quot;</span><span class="p">,</span>
                                            <span class="n">extra_classes</span><span class="o">=</span><span class="s2">&quot;text-monospace&quot;</span><span class="p">,</span>
                                            <span class="n">content</span><span class="o">=</span><span class="s2">&quot;v&quot;</span> <span class="o">+</span> <span class="n">version</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">+=</span> <span class="n">get_bootstrap_badge</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="s2">&quot;warning&quot;</span><span class="p">,</span>
                                            <span class="n">extra_classes</span><span class="o">=</span><span class="s2">&quot;text-monospace&quot;</span><span class="p">,</span>
                                            <span class="n">content</span><span class="o">=</span><span class="s2">&quot;v&quot;</span> <span class="o">+</span> <span class="n">version</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">for_readme</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&lt;span style=</span><span class="se">\&quot;</span><span class="s2">color:red;</span><span class="se">\&quot;</span><span class="s2">&gt;&lt;strong&gt;Do not install on any other version of Cinnamon.&lt;/strong&gt;&lt;/span&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>

    <span class="k">return</span> <span class="n">data</span></div>


<span class="c1"># ComplexBootstrap elements.</span>

<div class="viewcode-block" id="get_bootstrap_alert"><a class="viewcode-back" href="../../modules/python_modules/python_modules.localized_help_utils.html#python_modules.localized_help_creator.get_bootstrap_alert">[docs]</a><span class="k">def</span> <span class="nf">get_bootstrap_alert</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="s2">&quot;info&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">heading</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">bold_text</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get bootstrap alert.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    context : str, optional</span>
<span class="sd">        A Boostrap &quot;context color class&quot;. Examples: &quot;primary&quot;, &quot;secondary&quot;, &quot;success&quot;,</span>
<span class="sd">        &quot;danger&quot;, &quot;warning&quot;, &quot;info&quot;, etc.</span>
<span class="sd">    content : str, optional</span>
<span class="sd">        The content text.</span>
<span class="sd">    heading : str, optional</span>
<span class="sd">        A title for the alert.</span>
<span class="sd">    bold_text : bool, optional</span>
<span class="sd">        Whether to use the &quot;text-bold&quot; class or not.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        A bootstrap alert.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">h</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&lt;h4 class=&quot;alert-heading&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/h4&gt;&#39;</span> <span class="o">%</span> <span class="n">heading</span><span class="p">)</span> <span class="k">if</span> <span class="n">heading</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">&lt;div class=&quot;alert alert-</span><span class="si">{context}</span><span class="s2"> </span><span class="si">{bold_text}</span><span class="s2"> shadow-sm&quot; role=&quot;alert&quot;&gt;</span>
<span class="si">{heading}</span><span class="s2"></span>
<span class="si">{content}</span><span class="s2"></span>
<span class="s2">&lt;/div&gt;</span>
<span class="s2">&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">,</span>
           <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
           <span class="n">heading</span><span class="o">=</span><span class="n">h</span><span class="p">,</span>
           <span class="n">bold_text</span><span class="o">=</span><span class="s2">&quot;text-bold&quot;</span> <span class="k">if</span> <span class="n">bold_text</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="get_bootstrap_card"><a class="viewcode-back" href="../../modules/python_modules/python_modules.localized_help_utils.html#python_modules.localized_help_creator.get_bootstrap_card">[docs]</a><span class="k">def</span> <span class="nf">get_bootstrap_card</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="s2">&quot;info&quot;</span><span class="p">,</span>
                       <span class="n">header</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                       <span class="n">body</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                       <span class="n">body_extra_classes</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                       <span class="n">marging_y</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
                       <span class="n">white_header</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get bootstrap card.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    context : str, optional</span>
<span class="sd">        A Boostrap &quot;context color class&quot;. Examples: &quot;primary&quot;, &quot;secondary&quot;, &quot;success&quot;,</span>
<span class="sd">        &quot;danger&quot;, &quot;warning&quot;, &quot;info&quot;, etc.</span>
<span class="sd">    header : str, optional</span>
<span class="sd">        The header text.</span>
<span class="sd">    body : str, optional</span>
<span class="sd">        The content text.</span>
<span class="sd">    body_extra_classes : str, optional</span>
<span class="sd">        Extra classes to set to the card body.</span>
<span class="sd">    marging_y : int, optional</span>
<span class="sd">        Margin top and botton for the card.</span>
<span class="sd">    white_header : bool, optional</span>
<span class="sd">        Whether to set the &quot;text-white&quot; class to the card header.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        A bootstrap card.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;&quot;&quot;&lt;div class=&quot;card text-bold my-</span><span class="si">{marging_y}</span><span class="s2"> border-</span><span class="si">{context}</span><span class="s2"> shadow-sm&quot;&gt;</span>
<span class="s2">    &lt;div class=&quot;card-header bg-</span><span class="si">{context}</span><span class="s2"> </span><span class="si">{white_header}</span><span class="s2">&quot;&gt;</span><span class="si">{header}</span><span class="s2">&lt;/div&gt;</span>
<span class="s2">    &lt;div class=&quot;card-body text-</span><span class="si">{context}</span><span class="s2"> </span><span class="si">{body_extra_classes}</span><span class="s2">&quot;&gt;</span><span class="si">{body}</span><span class="s2">&lt;/div&gt;</span>
<span class="s2">&lt;/div&gt;&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">,</span>
        <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span>
        <span class="n">header</span><span class="o">=</span><span class="n">header</span><span class="p">,</span>
        <span class="n">body_extra_classes</span><span class="o">=</span><span class="n">body_extra_classes</span><span class="p">,</span>
        <span class="n">marging_y</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">marging_y</span><span class="p">),</span>
        <span class="n">white_header</span><span class="o">=</span><span class="s2">&quot;text-white&quot;</span> <span class="k">if</span> <span class="n">white_header</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="get_bootstrap_badge"><a class="viewcode-back" href="../../modules/python_modules/python_modules.localized_help_utils.html#python_modules.localized_help_creator.get_bootstrap_badge">[docs]</a><span class="k">def</span> <span class="nf">get_bootstrap_badge</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="s2">&quot;info&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">extra_classes</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">is_pill</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get bootstrap badge.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    context : str, optional</span>
<span class="sd">        A Boostrap &quot;context color class&quot;. Examples: &quot;primary&quot;, &quot;secondary&quot;, &quot;success&quot;,</span>
<span class="sd">        &quot;danger&quot;, &quot;warning&quot;, &quot;info&quot;, etc.</span>
<span class="sd">    content : str, optional</span>
<span class="sd">        The content text.</span>
<span class="sd">    extra_classes : str, optional</span>
<span class="sd">        Extra classes to set to the &lt;img&gt; element.</span>
<span class="sd">    is_pill : bool, optional</span>
<span class="sd">        Whether to use the &quot;badge-pill&quot; class or not.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    srt</span>
<span class="sd">        A bootstrap badge.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;&quot;&quot;&lt;span class=&quot;badge </span><span class="si">{is_pill}</span><span class="s2"> badge-</span><span class="si">{context}</span><span class="s2"> shadow-sm </span><span class="si">{extra_classes}</span><span class="s2">&quot;&gt;</span><span class="si">{content}</span><span class="s2">&lt;/span&gt;</span>
<span class="s2">&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">,</span>
           <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
           <span class="n">extra_classes</span><span class="o">=</span><span class="n">extra_classes</span><span class="p">,</span>
           <span class="n">is_pill</span><span class="o">=</span><span class="s2">&quot;badge-pill&quot;</span> <span class="k">if</span> <span class="n">is_pill</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="get_image_container"><a class="viewcode-back" href="../../modules/python_modules/python_modules.localized_help_utils.html#python_modules.localized_help_creator.get_image_container">[docs]</a><span class="k">def</span> <span class="nf">get_image_container</span><span class="p">(</span><span class="n">extra_classes</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">alt</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">centered</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get image container.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    extra_classes : str, optional</span>
<span class="sd">        Extra classes to set to the &lt;img&gt; element.</span>
<span class="sd">    alt : str, optional</span>
<span class="sd">        Text to set the image alt attribute.</span>
<span class="sd">    centered : bool, optional</span>
<span class="sd">        Whether to wrap the &lt;img&gt; element with a &lt;div&gt; with the &quot;img-centered-container&quot; class set.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    srt</span>
<span class="sd">        An &lt;img&gt; element or a container with an &lt;img&gt; element.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">container</span> <span class="o">=</span> <span class="s1">&#39;&lt;div class=&quot;img-centered-container&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/div&gt;&#39;</span> <span class="k">if</span> <span class="n">centered</span> <span class="k">else</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="n">container</span> <span class="o">%</span> <span class="s2">&quot;&quot;&quot;&lt;img class=&quot;img-fluid </span><span class="si">{extra_classes}</span><span class="s2">&quot; alt=&quot;</span><span class="si">{alt}</span><span class="s2">&quot;&gt;</span>
<span class="s2">&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">alt</span><span class="o">=</span><span class="n">alt</span><span class="p">,</span>
           <span class="n">extra_classes</span><span class="o">=</span><span class="n">extra_classes</span><span class="p">)</span></div>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="k">pass</span>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2018, Odyseus.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a modified version of <a href="https://github.com/rtfd/sphinx_rtd_theme">sphinx-rtd-theme</a>. 

</footer>

        </div>
      </div>

      <a id="to-top-of-page" href="#top">
        <i class="fa fa-chevron-circle-up"></i>
      </a>

    </section>

  </div>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  <script type="text/javascript" src="../../_static/js/theme.min.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>